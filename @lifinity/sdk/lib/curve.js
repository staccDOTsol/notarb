'use strict';(function(_0x2db7d6,_0x2739cd){const _0x7d4553=a0_0x4831,_0x2e4c97=_0x2db7d6();while(!![]){try{const _0x373654=parseInt(_0x7d4553(0x101))/0x1*(parseInt(_0x7d4553(0xfc))/0x2)+-parseInt(_0x7d4553(0xf9))/0x3+parseInt(_0x7d4553(0xfe))/0x4*(-parseInt(_0x7d4553(0x102))/0x5)+-parseInt(_0x7d4553(0xfb))/0x6+-parseInt(_0x7d4553(0xff))/0x7*(parseInt(_0x7d4553(0x100))/0x8)+parseInt(_0x7d4553(0xfa))/0x9+parseInt(_0x7d4553(0xfd))/0xa;if(_0x373654===_0x2739cd)break;else _0x2e4c97['push'](_0x2e4c97['shift']());}catch(_0x14d160){_0x2e4c97['push'](_0x2e4c97['shift']());}}}(a0_0x29e4,0x9831c));var __importDefault=this&&this['__importDefault']||function(_0x35dfbf){return _0x35dfbf&&_0x35dfbf['__esModule']?_0x35dfbf:{'default':_0x35dfbf};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['getCurveAmount']=exports['TradeDirection']=void 0x0;const decimal_js_1=__importDefault(require('decimal.js'));exports['TradeDirection']={'AtoB':'AtoB','BtoA':'BtoA'};function getCurveAmount(_0x5a4406,_0x186b6e,_0x5a7b21,_0x307bba,_0x399fd0,_0x137376,_0x20e70b,_0x51f8ad,_0x3335d2,_0x10b6c7){let _0x37b75b=new decimal_js_1['default'](0x0),_0x3adf2d=new decimal_js_1['default'](0x0),_0x1083cc=_0x5a4406['times'](_0x307bba['tradeFeeNumerator'])['div'](_0x307bba['tradeFeeDenominator']),_0x99a844=_0x5a4406['times'](_0x307bba['ownerTradeFeeNumerator'])['div'](_0x307bba['ownerTradeFeeDenominator']);!_0x1083cc['isZero']()&&_0x1083cc['lt'](0x1)&&(_0x1083cc=new decimal_js_1['default'](0x1));!_0x99a844['isZero']()&&_0x99a844['lt'](0x1)&&(_0x99a844=new decimal_js_1['default'](0x1));const _0x3ceb28=_0x1083cc['plus'](_0x99a844),_0x3c2925=_0x307bba['tradeFeeNumerator']['div'](_0x307bba['tradeFeeDenominator'])['plus'](_0x307bba['ownerTradeFeeNumerator']['div'](_0x307bba['ownerTradeFeeDenominator'])),_0x12aa90=_0x5a4406['minus'](_0x3ceb28),_0x1db858=new decimal_js_1['default'](0xa),_0x3005bd=_0x1db858['pow'](_0x5a7b21['baseDecimals']);if(_0x5a7b21['freezeTrade']===0x1)throw new Error('ProgramIsFrozen');if(!_0x51f8ad['status']['eq'](0x1))throw new Error('InvalidPythStatus');if(_0x186b6e-_0x51f8ad['publishSlot']['toNumber']()>_0x20e70b['pythSlotLimit']['toNumber']())throw new Error('InvalidPythSlot');let _0x151fa9=_0x51f8ad['confidence']['div'](_0x51f8ad['price']);if(_0x151fa9['gt'](_0x20e70b['pythConfidenceLimit']['div'](_0x20e70b['configDenominator'])))throw new Error('InvalidPythConfidence');let _0x184347=_0x51f8ad['price'];if(_0x3335d2){if(!_0x3335d2['status']['eq'](0x1))throw new Error('InvalidPythPcStatus');if(_0x186b6e-_0x3335d2['publishSlot']['toNumber']()>_0x20e70b['pythSlotLimit']['toNumber']())throw new Error('InvalidPythPcSlot');let _0x11e32e=_0x3335d2['confidence']['div'](_0x3335d2['price']);if(_0x11e32e['gt'](_0x20e70b['pythConfidenceLimit']['div'](_0x20e70b['configDenominator'])))throw new Error('InvalidPythPcConfidence');_0x184347=_0x184347['times'](_0x1db858['pow'](Math['abs'](_0x3335d2['exponent'])))['div'](_0x3335d2['price']);}let _0x4d37d5=new decimal_js_1['default'](0x0);getAbs(_0x184347['div'](_0x20e70b['lastPrice'])['minus'](0x1))['gt'](_0x20e70b['adjustRatio']['div'](_0x20e70b['configDenominator']))?_0x4d37d5=_0x184347:_0x4d37d5=_0x20e70b['lastPrice'];;if(_0x20e70b['oracleStatus']['eq'](0x1)&&_0x10b6c7===exports['TradeDirection']['AtoB'])throw new Error('OracleConfidence');else{if(_0x20e70b['oracleStatus']['eq'](0x2)&&_0x10b6c7===exports['TradeDirection']['BtoA'])throw new Error('OracleConfidence');}const _0x2a9e80=_0x20e70b['lastBalancedPrice'],_0x58017e=_0x20e70b['coefficientUp'],_0xcc8d75=_0x20e70b['coefficientDown'];if(_0x5a7b21['curveType']===0x0){const {destinationAmountSwapped:_0x511701,poolPriceImpact:_0x49b480}=constantCurve(_0x12aa90,_0x4d37d5,_0x2a9e80,_0x3005bd,_0x58017e,_0xcc8d75,_0x399fd0,_0x137376,_0x20e70b,_0x10b6c7);_0x37b75b=_0x511701,_0x3adf2d=_0x49b480;}else{if(_0x5a7b21['curveType']===0x1){const {destinationAmountSwapped:_0x20d716,poolPriceImpact:_0x3bf0fa}=stableCurve(_0x12aa90,_0x4d37d5,_0x2a9e80,_0x3005bd,_0x58017e,_0xcc8d75,_0x399fd0,_0x137376,_0x20e70b,_0x10b6c7);_0x37b75b=_0x20d716,_0x3adf2d=_0x3bf0fa;}}if(_0x37b75b['lt'](0x1))throw new Error('ZeroAmountOut');if(_0x10b6c7===exports['TradeDirection']['AtoB']&&_0x37b75b['gte'](_0x137376))throw new Error('ExceedPoolBalance');else{if(_0x10b6c7===exports['TradeDirection']['BtoA']&&_0x37b75b['gte'](_0x399fd0))throw new Error('ExceedPoolBalance');}return{'amountSwapped':_0x37b75b,'priceImpact':_0x3adf2d,'fee':_0x3ceb28,'feePercent':_0x3c2925};}exports['getCurveAmount']=getCurveAmount;function a0_0x4831(_0x1395ad,_0x33a568){const _0x29e41e=a0_0x29e4();return a0_0x4831=function(_0x48314d,_0x5a1c85){_0x48314d=_0x48314d-0xf9;let _0x204fa9=_0x29e41e[_0x48314d];return _0x204fa9;},a0_0x4831(_0x1395ad,_0x33a568);}function constantCurve(_0x41c486,_0x3ea84d,_0x103b79,_0x4ad15f,_0x38a0cd,_0x12c0bf,_0x262be3,_0x51062b,_0x52345b,_0x47d393){let _0xca3ae9=new decimal_js_1['default'](0x0),_0x56ab2e=new decimal_js_1['default'](0x0),_0x5b12fd=_0x262be3['times'](_0x52345b['concentrationRatio']),_0x348641=_0x51062b['times'](_0x52345b['concentrationRatio']),_0x3d4525=_0x5b12fd['times'](_0x3ea84d)['div'](_0x4ad15f)['floor']();switch(_0x47d393){case exports['TradeDirection']['AtoB']:{if(_0x3ea84d['gt'](_0x103b79)&&_0x3d4525['gt'](_0x348641)){let _0x3b4505=_0x348641['div'](_0x3d4525),_0x4278fc=_0x3b4505['pow'](_0x12c0bf);_0x5b12fd=_0x5b12fd['times'](_0x4278fc)['floor'](),_0x348641=_0x348641['times'](_0x4278fc)['floor']();}else{if(_0x103b79['gt'](_0x3ea84d)&&_0x348641['gt'](_0x3d4525)){let _0x672ff7=_0x348641['div'](_0x3d4525),_0x4d713d=_0x672ff7['pow'](_0x38a0cd);_0x5b12fd=_0x5b12fd['times'](_0x4d713d)['floor'](),_0x348641=_0x348641['times'](_0x4d713d)['floor']();}else{if(_0x3d4525['gt'](_0x348641)){let _0x27e923=_0x348641['div'](_0x3d4525),_0x56480d=_0x27e923['pow'](_0x12c0bf);_0x5b12fd=_0x5b12fd['times'](_0x56480d)['floor'](),_0x348641=_0x348641['times'](_0x56480d)['floor']();}else;}}let _0x15a2b4=new decimal_js_1['default'](Math['sqrt'](_0x5b12fd['toNumber']())),_0x5be34f=new decimal_js_1['default'](Math['sqrt'](_0x348641['toNumber']())),_0x553b87=new decimal_js_1['default'](Math['sqrt'](_0x3ea84d['toNumber']()))['div'](new decimal_js_1['default'](Math['sqrt'](_0x4ad15f['toNumber']()))),_0x25b0e3=_0x15a2b4['times'](_0x5be34f);_0x5b12fd=_0x25b0e3['div'](_0x553b87)['floor'](),_0x348641=_0x25b0e3['times'](_0x553b87)['floor']();let _0x3794d5=_0x5b12fd['times'](_0x348641),_0x143232=_0x5b12fd['plus'](_0x41c486),{q:_0x286bdb,r:_0x26240d}=checkedCeilDiv(_0x3794d5,_0x143232),_0x1f1a50=_0x286bdb['floor']();_0x143232=_0x26240d['floor'](),_0xca3ae9=_0x348641['minus'](_0x1f1a50)['floor']();const _0x5128e7=_0x348641['div'](_0x5b12fd),_0x5b66ed=_0x348641['minus'](_0xca3ae9)['div'](_0x5b12fd['plus'](_0x41c486));_0x56ab2e=_0x5128e7['minus'](_0x5b66ed)['div'](_0x5128e7);break;}case exports['TradeDirection']['BtoA']:{if(_0x3ea84d['gt'](_0x103b79)&&_0x3d4525['gt'](_0x348641)){let _0x6fbc06=_0x3d4525['div'](_0x348641),_0x491072=_0x6fbc06['pow'](_0x38a0cd);_0x5b12fd=_0x5b12fd['times'](_0x491072)['floor'](),_0x348641=_0x348641['times'](_0x491072)['floor']();}else{if(_0x103b79['gt'](_0x3ea84d)&&_0x348641['gt'](_0x3d4525)){let _0xd51b51=_0x3d4525['div'](_0x348641),_0x4c5c40=_0xd51b51['pow'](_0x12c0bf);_0x5b12fd=_0x5b12fd['times'](_0x4c5c40)['floor'](),_0x348641=_0x348641['times'](_0x4c5c40)['floor']();}else{if(_0x3d4525['gt'](_0x348641));else{let _0x4e0bcd=_0x3d4525['div'](_0x348641),_0x358349=_0x4e0bcd['pow'](_0x12c0bf);_0x5b12fd=_0x5b12fd['times'](_0x358349)['floor'](),_0x348641=_0x348641['times'](_0x358349)['floor']();}}}let _0x5137d2=new decimal_js_1['default'](Math['sqrt'](_0x5b12fd['toNumber']())),_0x4da649=new decimal_js_1['default'](Math['sqrt'](_0x348641['toNumber']())),_0x49bbdd=new decimal_js_1['default'](Math['sqrt'](_0x3ea84d['toNumber']()))['div'](new decimal_js_1['default'](Math['sqrt'](_0x4ad15f['toNumber']()))),_0x5efc64=_0x5137d2['times'](_0x4da649);_0x5b12fd=_0x5efc64['div'](_0x49bbdd)['floor'](),_0x348641=_0x5efc64['times'](_0x49bbdd)['floor']();let _0xccbf01=_0x5b12fd['times'](_0x348641),_0x2d8771=_0x348641['plus'](_0x41c486),{q:_0x9672c5,r:_0x3b43d6}=checkedCeilDiv(_0xccbf01,_0x2d8771),_0x472156=_0x9672c5['floor']();_0x2d8771=_0x3b43d6['floor'](),_0xca3ae9=_0x5b12fd['minus'](_0x472156)['floor']();const _0x4caef4=_0x348641['div'](_0x5b12fd),_0x5c8ffe=_0x348641['plus'](_0x41c486)['div'](_0x5b12fd['minus'](_0xca3ae9));_0x56ab2e=_0x5c8ffe['minus'](_0x4caef4)['div'](_0x5c8ffe);break;}}return{'destinationAmountSwapped':_0xca3ae9,'poolPriceImpact':_0x56ab2e};};function a0_0x29e4(){const _0x138d67=['8835576OtvKMX','81288pZMohr','5JJvfQW','2417217NxMefd','5115816iSZNhX','5117118DVDHuu','2iWgEyr','38778050fpfWVf','4564360kvkDUk','7VjFrQN'];a0_0x29e4=function(){return _0x138d67;};return a0_0x29e4();}function stableCurve(_0x4cb55d,_0xb0b4fa,_0x12b6ee,_0x9ca3c7,_0x718507,_0xe311e6,_0x41bebe,_0x228390,_0x149226,_0x5c0368){let _0x35fb8b=new decimal_js_1['default'](0x0),_0x5dec2a=new decimal_js_1['default'](0x0),_0x2d0ed7=_0x41bebe,_0x18c118=_0x228390,_0x483c98=_0x2d0ed7['times'](_0xb0b4fa)['div'](_0x9ca3c7);switch(_0x5c0368){case exports['TradeDirection']['AtoB']:{if(_0xb0b4fa['gt'](_0x12b6ee)&&_0x483c98['gt'](_0x18c118)){let _0x6d03de=_0x18c118['div'](_0x483c98),_0x586992=_0x6d03de['pow'](_0xe311e6);_0x2d0ed7=_0x2d0ed7['times'](_0x586992),_0x18c118=_0x18c118['times'](_0x586992);}else{if(_0x12b6ee['gt'](_0xb0b4fa)&&_0x18c118['gt'](_0x483c98)){let _0x5cff1d=_0x18c118['div'](_0x483c98),_0x1a4e82=_0x5cff1d['pow'](_0x718507);_0x2d0ed7=_0x2d0ed7['times'](_0x1a4e82),_0x18c118=_0x18c118['times'](_0x1a4e82);}else{if(_0x483c98['gt'](_0x18c118)){let _0x25964c=_0x18c118['div'](_0x483c98),_0x4bd129=_0x25964c['pow'](_0xe311e6);_0x2d0ed7=_0x2d0ed7['times'](_0x4bd129),_0x18c118=_0x18c118['times'](_0x4bd129);}else;}}_0x2d0ed7=_0x2d0ed7['times'](_0x149226['concentrationRatio']),_0x18c118=_0x18c118['times'](_0x149226['concentrationRatio']);let _0x1a9f57=new decimal_js_1['default'](Math['sqrt'](_0x2d0ed7['toNumber']())),_0x555961=new decimal_js_1['default'](Math['sqrt'](_0x18c118['toNumber']())),_0x2b21c5=new decimal_js_1['default'](Math['sqrt'](_0xb0b4fa['toNumber']()))['div'](new decimal_js_1['default'](Math['sqrt'](_0x9ca3c7['toNumber']()))),_0xc7789e=_0x1a9f57['times'](_0x555961);_0x2d0ed7=_0xc7789e['div'](_0x2b21c5),_0x18c118=_0xc7789e['times'](_0x2b21c5);let _0x272fa6=_0x2d0ed7['times'](_0x18c118),_0x588b8a=_0x2d0ed7['plus'](_0x4cb55d),{q:_0x10a5e6,r:_0x1384f2}=checkedCeilDiv(_0x272fa6,_0x588b8a),_0x30ba92=_0x10a5e6;_0x588b8a=_0x1384f2,_0x35fb8b=_0x18c118['minus'](_0x30ba92);const _0x534d4d=_0x18c118['div'](_0x2d0ed7),_0x424893=_0x18c118['minus'](_0x35fb8b)['div'](_0x2d0ed7['plus'](_0x4cb55d));_0x5dec2a=_0x534d4d['minus'](_0x424893)['div'](_0x424893);break;}case exports['TradeDirection']['BtoA']:{if(_0xb0b4fa['gt'](_0x12b6ee)&&_0x483c98['gt'](_0x18c118)){let _0x3ed5ce=_0x483c98['div'](_0x18c118),_0x757e12=_0x3ed5ce['pow'](_0x718507);_0x2d0ed7=_0x2d0ed7['times'](_0x757e12),_0x18c118=_0x18c118['times'](_0x757e12);}else{if(_0x12b6ee['gt'](_0xb0b4fa)&&_0x18c118['gt'](_0x483c98)){let _0x45a2b7=_0x483c98['div'](_0x18c118),_0x31e670=_0x45a2b7['pow'](_0xe311e6);_0x2d0ed7=_0x2d0ed7['times'](_0x31e670),_0x18c118=_0x18c118['times'](_0x31e670);}else{if(_0x483c98['gt'](_0x18c118));else{let _0x152f97=_0x483c98['div'](_0x18c118),_0x1f2b5e=_0x152f97['pow'](_0xe311e6);_0x2d0ed7=_0x2d0ed7['times'](_0x1f2b5e),_0x18c118=_0x18c118['times'](_0x1f2b5e);}}}_0x2d0ed7=_0x2d0ed7['times'](_0x149226['concentrationRatio']),_0x18c118=_0x18c118['times'](_0x149226['concentrationRatio']);let _0x143a1e=new decimal_js_1['default'](Math['sqrt'](_0x2d0ed7['toNumber']())),_0x332c37=new decimal_js_1['default'](Math['sqrt'](_0x18c118['toNumber']())),_0x84ed42=new decimal_js_1['default'](Math['sqrt'](_0xb0b4fa['toNumber']()))['div'](new decimal_js_1['default'](Math['sqrt'](_0x9ca3c7['toNumber']()))),_0x17a80a=_0x143a1e['times'](_0x332c37);_0x2d0ed7=_0x17a80a['div'](_0x84ed42),_0x18c118=_0x17a80a['times'](_0x84ed42);let _0x3b36bd=_0x2d0ed7['times'](_0x18c118),_0x9720a5=_0x18c118['plus'](_0x4cb55d),{q:_0x4fa7e3,r:_0x2ad515}=checkedCeilDiv(_0x3b36bd,_0x9720a5),_0xec1f29=_0x4fa7e3;_0x9720a5=_0x2ad515,_0x35fb8b=_0x2d0ed7['minus'](_0xec1f29);const _0x13db3e=_0x18c118['div'](_0x2d0ed7),_0x2e6219=_0x18c118['plus'](_0x4cb55d)['div'](_0x2d0ed7['minus'](_0x35fb8b));_0x5dec2a=_0x2e6219['minus'](_0x13db3e)['div'](_0x13db3e);break;}}return _0x35fb8b=new decimal_js_1['default'](Math['floor'](_0x35fb8b['toNumber']())),{'destinationAmountSwapped':_0x35fb8b,'poolPriceImpact':_0x5dec2a};}function getAbs(_0xd74a2){return _0xd74a2['toNumber']()<0x0?_0xd74a2['times'](-0x1):_0xd74a2;};function checkedCeilDiv(_0x310331,_0x2c0c54){let _0x2b63e3=_0x2c0c54,_0x279dad=_0x310331['div'](_0x2b63e3);if(_0x279dad['eq'](0x0))return{'q':new decimal_js_1['default'](0x0),'r':new decimal_js_1['default'](0x0)};let _0x27da7d=_0x310331['mod'](_0x2c0c54);if(_0x27da7d['gt'](0x0)){_0x279dad=_0x279dad['plus'](0x1),_0x2b63e3=_0x310331['div'](_0x279dad);let _0x39814b=_0x310331['mod'](_0x279dad);_0x39814b['gt'](0x0)&&(_0x2b63e3=_0x2b63e3['plus'](0x1));}return{'q':_0x279dad,'r':_0x2b63e3};}